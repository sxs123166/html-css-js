<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 什么是防抖？
        // 防抖策略是当事件被触发后，延迟n秒后在执行回调，如果在这n秒内事件又被触发，则重新计时

        // 防抖的应用场景
        // 用户在输入框中连续输入一串字符串时，可以通过防抖策略，只在输入完后，才执行查询的请求，这样可以有效
        // 较少请求次数，节省请求资源


        // 实现输入框的防抖
         var timer = null   //1. 防抖的 timer

         function debounceSearch(keywords) { //2. 定义防抖的函数
            timer = setTimeout(function() {
                // 发起JSONP请求
                getSuggestList(keywords)
            }, 500)
         }

         $('#ipt').on('keyup', function() {// 3.在触发keyup事件时， 立即清空timer
            clearTimeout(timer)
            ///省略其他代码
            debounceSearch(keywords)
         })
    </script>

    <!-- 1. 定义全局缓存对象 -->
    <script>
        //缓存对象
        var cacheObj = {}

        // 将搜索结果保存到缓存对象中
         //渲染建议列表
         function renderSuggestList(res) {
            //。。。省略其他代码

            //将搜索结果，添加到缓存对象中
            var k = $('#ipt').val().trim()
            cacheObj(k) = res
         }
    </script>
</body>
</html>